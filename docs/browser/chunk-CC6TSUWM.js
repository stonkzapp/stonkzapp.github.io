import{a as R}from"./chunk-D26XM7ET.js";import{a as j}from"./chunk-YJ622PI4.js";import{a as E}from"./chunk-WXQINL7T.js";import"./chunk-L34VEILA.js";import{a as O}from"./chunk-SEHDV2E7.js";import{a as y}from"./chunk-STAKAPIY.js";import"./chunk-RUDA2RPX.js";import{a as M}from"./chunk-O7TQW4TT.js";import{i as F}from"./chunk-Y2FNOCH7.js";import"./chunk-4BQZLGFG.js";import"./chunk-MHD2J2H6.js";import{d as p,g as C,h as S,k as b,n as _,t as x}from"./chunk-F6QTPZUH.js";import"./chunk-R7NQQTEA.js";import{e as P}from"./chunk-ISKXA73K.js";import"./chunk-DBXTAN6W.js";import"./chunk-ZESSTKUQ.js";import{Cb as n,Db as s,Eb as c,F as g,Lb as v,Wa as r,Xb as l,ab as a,hb as f,mb as w,tb as d,wa as h,yb as u}from"./chunk-KXY2N67X.js";import"./chunk-4CLCTAJ7.js";var V={currentPassword:"A senha atual n\xE3o pode estar vazia.",newPassword:"A nova senha n\xE3o pode estar vazia.",4:"Token inv\xE1lido ou expirado.",8:"A senha atual est\xE1 incorreta.",424:"Erro ao acessar depend\xEAncia externa.",429:"Muitas tentativas. Aguarde alguns minutos.",500:"Erro inesperado. Tente novamente."};function D(i,N){i&1&&(n(0,"div",1),c(1,"img",13),s())}var Z=(()=>{class i{get isSubmitDisabled(){let{newPassword:o,confirmPassword:t}=this.changePasswordForm.controls;return this.changePasswordForm.invalid||o.value!==t.value}constructor(o,t,e,m,A){this.passwordService=o,this.router=t,this.notificationService=e,this.formValidation=m,this.screenService=A,this.isLoading=h(!1),this.isMobile=!1,this.changePasswordForm=new S({currentPassword:this.formValidation.createFormControl("",[p.required]),newPassword:this.formValidation.createFormControl("",[p.required,this.formValidation.passwordValidator()])})}ngOnInit(){this.changePasswordForm.setValidators(this.formValidation.passwordsMatchValidator),this.screenService.isMobile$.subscribe(o=>{this.isMobile=o})}onChangePassword(){this.changePasswordForm.invalid||(this.isLoading.set(!0),this.passwordService.changePassword(this.changePasswordForm.value).pipe(g(()=>this.isLoading.set(!1))).subscribe({next:()=>{this.notificationService.showSuccess("Senha alterada com sucesso!"),this.router.navigate(["/dashboard"])},error:o=>{let t=o?.error?.code||o?.error?.field||"500",e=V[t]||E[t]||"Erro desconhecido.";this.notificationService.showError(e)}}))}static{this.\u0275fac=function(t){return new(t||i)(a(j),a(P),a(F),a(M),a(y))}}static{this.\u0275cmp=f({type:i,selectors:[["app-change-password"]],decls:15,vars:9,consts:[[1,"change-password-container"],[1,"change-password-left"],[1,"change-password-right"],[1,"change-password-card"],[1,"logo-section"],["src","logo.svg","alt","Stonkz Logo",1,"logo"],[1,"change-password-title"],[1,"change-password-subtitle"],[3,"ngSubmit","formGroup"],["label","Nova Senha",3,"control"],["label","Confirme a Nova Senha",3,"control","confirmControl","isConfirmPassword"],[2,"margin-top","16px"],[3,"label","disabled","loading"],["src","register/confirm.svg","alt","Change Password Image",1,"change-password-image"]],template:function(t,e){t&1&&(n(0,"div",0),w(1,D,2,0,"div",1),n(2,"div",2)(3,"section",3)(4,"div",4),c(5,"img",5),s(),n(6,"h2",6),l(7,"Alterar senha"),s(),n(8,"p",7),l(9," Digite sua senha atual e a nova senha. "),s(),n(10,"form",8),v("ngSubmit",function(){return e.onChangePassword()}),c(11,"app-password-input",9)(12,"app-password-input",10),n(13,"div",11),c(14,"app-button",12),s()()()()()),t&2&&(r(),u(e.isMobile?-1:1),r(9),d("formGroup",e.changePasswordForm),r(),d("control",e.changePasswordForm.controls.newPassword),r(),d("control",e.changePasswordForm.controls.confirmPassword)("confirmControl",e.changePasswordForm.controls.newPassword)("isConfirmPassword",!0),r(2),d("label","Redefinir Senha")("disabled",e.isSubmitDisabled||e.isLoading())("loading",e.isLoading()))},dependencies:[x,b,C,_,O,R],styles:['@charset "UTF-8";.change-password-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-height:100vh;width:100%;overflow:hidden}.change-password-left[_ngcontent-%COMP%]{flex:7;display:flex;justify-content:center;position:relative}.change-password-right[_ngcontent-%COMP%]{flex:3;display:flex;align-items:center;justify-content:center;height:100vh;overflow-y:auto}.logo-section[_ngcontent-%COMP%]{display:flex;justify-content:left;margin-bottom:20px}.logo[_ngcontent-%COMP%]{width:163px;height:42px;object-fit:contain}.change-password-image[_ngcontent-%COMP%]{width:100%;height:100vh;object-fit:cover;object-position:top}.change-password-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px;text-align:center}.change-password-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;row-gap:8px}.change-password-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:10px;text-align:left}.change-password-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:20px;text-align:left}.resend-text[_ngcontent-%COMP%]{margin-top:15px;font-size:14px}.resend-link[_ngcontent-%COMP%]{color:var(--color-primary);cursor:pointer;font-weight:500}.resend-link[_ngcontent-%COMP%]:hover{opacity:.7}@media (max-width: 768px){.change-password-container[_ngcontent-%COMP%]{flex-direction:column}.change-password-left[_ngcontent-%COMP%]{display:none}.change-password-right[_ngcontent-%COMP%]{align-items:flex-start;margin-top:24px;width:100%;height:auto}.change-password-card[_ngcontent-%COMP%]{padding:15px}}']})}}return i})();export{Z as ChangePasswordComponent};
