import{a as L}from"./chunk-R64SHCBP.js";import{a as V,b as A,c as D,f as N,h as j}from"./chunk-PSHGO4VA.js";import{a as q}from"./chunk-UIAZK7O4.js";import"./chunk-L34VEILA.js";import{a as B}from"./chunk-SEHDV2E7.js";import"./chunk-RUDA2RPX.js";import{a as G}from"./chunk-O7TQW4TT.js";import"./chunk-4BQZLGFG.js";import"./chunk-MHD2J2H6.js";import{d,g as E,k as z,n as k,r as I,t as T}from"./chunk-F6QTPZUH.js";import{a as y,b as S}from"./chunk-R7NQQTEA.js";import{e as O}from"./chunk-ISKXA73K.js";import{c as F}from"./chunk-DBXTAN6W.js";import"./chunk-ZESSTKUQ.js";import{Cb as o,Db as a,Eb as l,Kc as M,Lb as P,Lc as _,Mb as g,Rc as x,Wa as i,Xb as s,Zb as f,ab as m,ac as b,hb as w,mb as p,tb as c,ub as v,vb as C}from"./chunk-KXY2N67X.js";import"./chunk-4CLCTAJ7.js";var U=()=>[1,2,3,4,5];function R(n,u){if(n&1&&l(0,"div",17),n&2){let t=u.$implicit,r=g(2);v("background-color",t<=r.getPasswordStrength(r.newPasswordControl.value).score?r.getPasswordStrength(r.newPasswordControl.value).color:"#e0e0e0"),C("active",t<=r.getPasswordStrength(r.newPasswordControl.value).score)}}function Y(n,u){if(n&1&&(o(0,"div",12)(1,"div",13),s(2,"For\xE7a da senha:"),a(),o(3,"div",14),p(4,R,1,4,"div",15),a(),o(5,"div",16),s(6),a()()),n&2){let t=g();i(4),c("ngForOf",b(4,U)),i(),v("color",t.getPasswordStrength(t.newPasswordControl.value).color),i(),f(" ",t.getPasswordStrength(t.newPasswordControl.value).label," ")}}function Z(n,u){if(n&1&&(o(0,"div",18),s(1),a()),n&2){let t=g();i(),f(" ",t.getPasswordMismatchError()," ")}}var cr=(()=>{class n{constructor(t,r,e,h){this.fb=t,this.userService=r,this.router=e,this.formValidation=h,this.isSaving=!1,this.passwordForm=this.fb.group({currentPassword:this.formValidation.createFormControl("",[d.required,d.minLength(6)]),newPassword:this.formValidation.createFormControl("",[d.required,d.minLength(8)]),confirmPassword:this.formValidation.createFormControl("",[d.required])},{validators:this.passwordMatchValidator})}ngOnInit(){}passwordMatchValidator(t){let r=t.get("newPassword"),e=t.get("confirmPassword");return r&&e&&r.value!==e.value?{passwordMismatch:!0}:null}get currentPasswordControl(){return this.passwordForm.get("currentPassword")}get newPasswordControl(){return this.passwordForm.get("newPassword")}get confirmPasswordControl(){return this.passwordForm.get("confirmPassword")}getPasswordStrength(t){let r=0;switch(t.length>=8&&r++,/[a-z]/.test(t)&&r++,/[A-Z]/.test(t)&&r++,/[0-9]/.test(t)&&r++,/[^A-Za-z0-9]/.test(t)&&r++,r){case 0:case 1:return{score:r,label:"Muito Fraca",color:"#ff4444"};case 2:return{score:r,label:"Fraca",color:"#ff8800"};case 3:return{score:r,label:"M\xE9dia",color:"#ffaa00"};case 4:return{score:r,label:"Forte",color:"#00aa00"};case 5:return{score:r,label:"Muito Forte",color:"#008800"};default:return{score:0,label:"Muito Fraca",color:"#ff4444"}}}onSubmit(){if(this.passwordForm.valid){this.isSaving=!0;let t=this.passwordForm.value,r={currentPassword:t.currentPassword,newPassword:t.newPassword};this.userService.changePassword(r).subscribe({next:()=>{console.log("Senha alterada com sucesso!"),this.isSaving=!1,setTimeout(()=>{this.router.navigate(["/dashboard/profile"])},1500)},error:e=>{console.error("Erro ao alterar senha:",e),this.isSaving=!1}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.passwordForm.controls).forEach(t=>{this.passwordForm.get(t)?.markAsTouched()})}getPasswordMismatchError(){return this.passwordForm.hasError("passwordMismatch")?"As senhas n\xE3o coincidem":""}static{this.\u0275fac=function(r){return new(r||n)(m(I),m(L),m(O),m(G))}}static{this.\u0275cmp=w({type:n,selectors:[["stz-change-password"]],decls:33,vars:10,consts:[[1,"change-password-container"],[1,"password-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],["label","Senha Atual","placeholder","Digite sua senha atual","type","password",1,"form-field",3,"control"],["label","Nova Senha","placeholder","Digite sua nova senha","type","password",1,"form-field",3,"control"],["class","password-strength",4,"ngIf"],["label","Confirmar Nova Senha","placeholder","Confirme sua nova senha","type","password",1,"form-field",3,"control"],["class","form-error",4,"ngIf"],[1,"security-tips"],[1,"form-actions"],["label","Alterar Senha","iconLeft","lock","color","primary","type","submit",3,"width","height","loading","disabled"],[1,"password-strength"],[1,"strength-label"],[1,"strength-bars"],["class","strength-bar",3,"active","background-color",4,"ngFor","ngForOf"],[1,"strength-text"],[1,"strength-bar"],[1,"form-error"]],template:function(r,e){r&1&&(o(0,"div",0)(1,"form",1),P("ngSubmit",function(){return e.onSubmit()}),o(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title")(5,"mat-icon"),s(6,"lock"),a(),s(7," Seguran\xE7a da Conta "),a()(),o(8,"mat-card-content")(9,"div",3),l(10,"app-input",4),a(),o(11,"div",3),l(12,"app-input",5),a(),p(13,Y,7,5,"div",6),o(14,"div",3),l(15,"app-input",7),a(),p(16,Z,2,1,"div",8),o(17,"div",9)(18,"h3"),s(19,"Dicas para uma senha segura:"),a(),o(20,"ul")(21,"li"),s(22,"Use pelo menos 8 caracteres"),a(),o(23,"li"),s(24,"Combine letras mai\xFAsculas e min\xFAsculas"),a(),o(25,"li"),s(26,"Inclua n\xFAmeros e s\xEDmbolos especiais"),a(),o(27,"li"),s(28,"Evite informa\xE7\xF5es pessoais \xF3bvias"),a(),o(29,"li"),s(30,"N\xE3o use a mesma senha em outros sites"),a()()()()(),o(31,"div",10),l(32,"app-button",11),a()()()),r&2&&(i(),c("formGroup",e.passwordForm),i(9),c("control",e.currentPasswordControl),i(2),c("control",e.newPasswordControl),i(),c("ngIf",e.newPasswordControl.value),i(2),c("control",e.confirmPasswordControl),i(),c("ngIf",e.passwordForm.hasError("passwordMismatch")&&e.confirmPasswordControl.touched),i(16),c("width","180px")("height","44px")("loading",e.isSaving)("disabled",e.passwordForm.invalid))},dependencies:[x,M,_,T,z,E,k,j,V,D,N,A,S,y,B,q,F],styles:['@charset "UTF-8";.change-password-container[_ngcontent-%COMP%]{max-width:600px;background-color:var(--color-background);min-height:100vh;transition:background-color var(--transition-normal)}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-6)}.form-section[_ngcontent-%COMP%]{background-color:var(--color-card-background);border:1px solid var(--color-card-border);border-radius:var(--radius-xl);box-shadow:var(--shadow-card);transition:all var(--transition-normal);overflow:hidden}.form-section[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-card-hover);transform:translateY(-2px)}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:var(--space-6) var(--space-6) 0 var(--space-6);background-color:var(--color-surface-secondary);border-bottom:1px solid var(--color-border-tertiary)}.form-section[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin:0;transition:color var(--transition-normal)}.form-section[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary);font-size:var(--font-size-2xl);width:var(--font-size-2xl);height:var(--font-size-2xl)}.form-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:var(--space-6)}.form-row[_ngcontent-%COMP%]{margin-bottom:var(--space-6)}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-field[_ngcontent-%COMP%]{width:100%}.password-strength[_ngcontent-%COMP%]{margin:var(--space-5) 0;padding:var(--space-4);background-color:var(--color-input-background);border-radius:var(--radius-lg);border:1px solid var(--color-input-border);transition:all var(--transition-normal)}.strength-label[_ngcontent-%COMP%]{font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-primary);margin-bottom:var(--space-3)}.strength-bars[_ngcontent-%COMP%]{display:flex;gap:var(--space-1);margin-bottom:var(--space-2)}.strength-bar[_ngcontent-%COMP%]{flex:1;height:8px;background-color:var(--color-border-tertiary);border-radius:var(--radius-sm);transition:all var(--transition-normal)}.strength-bar.active[_ngcontent-%COMP%]{transform:scaleY(1.2)}.strength-text[_ngcontent-%COMP%]{font-size:var(--font-size-xs);font-weight:var(--font-weight-semibold);text-align:center;text-transform:uppercase;letter-spacing:.5px}.form-error[_ngcontent-%COMP%]{color:var(--color-error);font-size:var(--font-size-sm);margin-top:var(--space-2);padding:var(--space-2) var(--space-3);background-color:#ef44441a;border-radius:var(--radius-sm);border-left:3px solid var(--color-error)}.security-tips[_ngcontent-%COMP%]{margin-top:var(--space-6);padding:var(--space-5);background-color:var(--color-input-background);border-radius:var(--radius-lg);border:1px solid var(--color-input-border);transition:all var(--transition-normal)}.security-tips[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);box-shadow:var(--shadow-sm)}.security-tips[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--font-size-base);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin:0 0 var(--space-4) 0}.security-tips[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:var(--space-5);color:var(--color-text-secondary)}.security-tips[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:var(--space-2);font-size:var(--font-size-sm);line-height:var(--line-height-normal)}.security-tips[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-4);padding-top:var(--space-6);border-top:1px solid var(--color-border-primary)}@media (max-width: 768px){.change-password-container[_ngcontent-%COMP%]{padding:var(--space-5) var(--space-4)}.page-title[_ngcontent-%COMP%]{font-size:var(--font-size-2xl)}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-3)}}@media (max-width: 480px){.change-password-container[_ngcontent-%COMP%]{padding:var(--space-4) var(--space-3)}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--space-3)}.page-title[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.form-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:var(--space-5) var(--space-4)}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:var(--space-5) var(--space-5) 0 var(--space-5)}.security-tips[_ngcontent-%COMP%]{padding:var(--space-4)}}']})}}return n})();export{cr as ChangePasswordComponent};
