import{b as C,c as _,d as T}from"./chunk-GIUFONP4.js";import{b as F,c as j}from"./chunk-OXYSB3PN.js";import{h as L}from"./chunk-PSHGO4VA.js";import{a as I}from"./chunk-UIAZK7O4.js";import{b as E}from"./chunk-L34VEILA.js";import{a as V}from"./chunk-SEHDV2E7.js";import{a as D}from"./chunk-STAKAPIY.js";import{g as y}from"./chunk-RUDA2RPX.js";import{a as z}from"./chunk-O7TQW4TT.js";import{i as A}from"./chunk-Y2FNOCH7.js";import"./chunk-4BQZLGFG.js";import"./chunk-MHD2J2H6.js";import{d as p,g as P,h as O,k as S,n as b,t as w}from"./chunk-F6QTPZUH.js";import"./chunk-R7NQQTEA.js";import{e as x}from"./chunk-ISKXA73K.js";import{c as k}from"./chunk-DBXTAN6W.js";import"./chunk-ZESSTKUQ.js";import{Cb as t,Db as n,Eb as s,F as f,Lb as d,Wa as l,Xb as o,ab as a,hb as u,mb as M,tb as g,wa as h,yb as v}from"./chunk-KXY2N67X.js";import"./chunk-4CLCTAJ7.js";function N(c,q){c&1&&(t(0,"div",1),s(1,"img",18),n())}var de=(()=>{class c{constructor(i,r,e,m,R,G,B){this.authService=i,this.tokenService=r,this.mockAuthService=e,this.screenService=m,this.notificationService=R,this.router=G,this.formValidation=B,this.isLoading=h(!1),this.isMobile=!1,this.showMockInfo=!0,this.loginForm=new O({email:this.formValidation.createFormControl("",[p.required,p.pattern(this.formValidation.patterns.email)]),password:this.formValidation.createFormControl("",[p.required,this.formValidation.passwordValidator()])})}ngOnInit(){if(this.screenService.isMobile$.subscribe(i=>{this.isMobile=i}),this.mockAuthService.isInMockMode()){let i=this.mockAuthService.getMockCredentials();this.loginForm.patchValue({email:i.email,password:i.password})}}onLogin(){if(this.loginForm.invalid)return;this.isLoading.set(!0);let{email:i,password:r}=this.loginForm.value;this.authService.login({username:i,password:r}).pipe(f(()=>this.isLoading.set(!1))).subscribe({next:e=>{this.tokenService.setToken(e.accessToken.replace(/"/g,""),e.refreshToken,e.expiresIn),this.notificationService.showSuccess("Login realizado com sucesso!"),this.router.navigate(["/dashboard"])},error:e=>{console.log("Backend n\xE3o dispon\xEDvel, usando modo mock..."),this.useMockLogin(i,r)}})}useMockLogin(i,r){this.mockAuthService.login(i,r).subscribe({next:e=>{e.success?(this.notificationService.showSuccess("Login realizado com sucesso! (Modo Mock)"),this.router.navigate(["/dashboard"])):this.notificationService.showError(e.message)},error:e=>{this.notificationService.showError("Erro no login mock")}})}onForgotPassword(){this.router.navigate(["auth/forgot-password"])}onRegister(){this.router.navigate(["auth/register"])}static{this.\u0275fac=function(r){return new(r||c)(a(T),a(C),a(_),a(D),a(A),a(x),a(z))}}static{this.\u0275cmp=u({type:c,selectors:[["app-login"]],decls:35,vars:9,consts:[[1,"login-container"],[1,"login-left"],[1,"login-right"],[1,"login-card"],[1,"logo-section"],["src","logo.svg","alt","Stonkz Logo",1,"logo"],[1,"login-title"],[1,"register-link",3,"click"],[3,"ngSubmit","formGroup"],["label","E-mail","placeholder","Digite seu E-mail","type","text",3,"control"],["label","Senha","placeholder","Digite sua senha","type","password",3,"control"],[1,"login-options"],[1,"forgot-password-link",3,"click"],[3,"label","disabled","loading","iconLeft","iconRight"],[1,"mock-credentials-info"],[1,"mock-badge"],[1,"mock-info"],[1,"credentials"],["src","login/login.svg","alt","Login Image",1,"login-image"]],template:function(r,e){r&1&&(t(0,"div",0),M(1,N,2,0,"div",1),t(2,"div",2)(3,"section",3)(4,"div",4),s(5,"img",5),n(),t(6,"h2",6),o(7," Entre ou "),t(8,"a",7),d("click",function(){return e.onRegister()}),o(9,"crie sua conta"),n()(),t(10,"form",8),d("ngSubmit",function(){return e.onLogin()}),s(11,"app-input",9)(12,"app-input",10),t(13,"div",11)(14,"a",12),d("click",function(){return e.onForgotPassword()}),o(15,"Esqueceu sua senha?"),n()(),s(16,"app-button",13),n()()()(),t(17,"div",14)(18,"div",15),o(19,"DEV"),n(),t(20,"div",16)(21,"h4"),o(22,"Modo de Desenvolvimento"),n(),t(23,"p"),o(24,"Use estas credenciais para testar:"),n(),t(25,"div",17)(26,"strong"),o(27,"Email:"),n(),o(28," appstonkz@gmail.com"),s(29,"br"),t(30,"strong"),o(31,"Senha:"),n(),o(32," Stonkz@1 "),n(),t(33,"small"),o(34,"O sistema tentar\xE1 primeiro o backend real, depois usar\xE1 dados simulados."),n()()()),r&2&&(l(),v(e.isMobile?-1:1),l(9),g("formGroup",e.loginForm),l(),g("control",e.loginForm.controls.email),l(),g("control",e.loginForm.controls.password),l(4),g("label","Entrar")("disabled",e.loginForm.invalid||e.isLoading())("loading",e.isLoading())("iconLeft",null)("iconRight",null))},dependencies:[w,S,P,b,y,E,k,L,F,j,I,V],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-height:100vh;width:100%;overflow:hidden}.login-left[_ngcontent-%COMP%]{flex:7;display:flex;justify-content:center;position:relative}.login-image[_ngcontent-%COMP%]{width:100%;height:100vh;object-fit:cover;object-position:top}.login-right[_ngcontent-%COMP%]{flex:3;display:flex;align-items:center;justify-content:center;height:100vh;overflow-y:auto}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px}.logo-section[_ngcontent-%COMP%]{display:flex;justify-content:left;margin-bottom:20px}.logo[_ngcontent-%COMP%]{width:163px;height:42px;object-fit:contain}.login-title[_ngcontent-%COMP%]{font-size:16px;font-weight:400;text-align:left;margin-bottom:20px}.login-title[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]{cursor:pointer;font-weight:500;color:var(--color-primary)}.login-title[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:.5}.mock-credentials-info[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #dee2e6;border-radius:8px;display:flex;align-items:flex-start;gap:12px;box-shadow:0 2px 8px #0000001a}.mock-credentials-info[_ngcontent-%COMP%]   .mock-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ff8e53);color:#fff;font-size:.7rem;font-weight:600;padding:4px 8px;border-radius:4px;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0;margin-top:2px}.mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]{flex:1}.mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:600;color:#495057}.mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:12px;color:#6c757d}.mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   .credentials[_ngcontent-%COMP%]{background:#fff;padding:8px 12px;border-radius:4px;border:1px solid #ced4da;margin:8px 0;font-size:12px;color:#495057;line-height:1.4}.mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;color:#868e96;font-style:italic}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{flex-direction:column}.login-left[_ngcontent-%COMP%]{display:none}.login-right[_ngcontent-%COMP%]{align-items:flex-start;margin-top:24px;width:100%;height:auto}.login-card[_ngcontent-%COMP%]{padding:15px}.mock-credentials-info[_ngcontent-%COMP%]{margin-top:16px;padding:12px}.mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px}.mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   .credentials[_ngcontent-%COMP%], .mock-credentials-info[_ngcontent-%COMP%]   .mock-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px}}.login-options[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;margin-top:8px;margin-bottom:20px}.forgot-password-link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none;color:var(--color-primary);font-size:12px}.forgot-password-link[_ngcontent-%COMP%]:hover{opacity:.5}']})}}return c})();export{de as LoginComponent};
