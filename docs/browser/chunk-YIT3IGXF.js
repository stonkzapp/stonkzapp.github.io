import{a as I}from"./chunk-D26XM7ET.js";import{a as k}from"./chunk-YJ622PI4.js";import{a as V}from"./chunk-BG5OABPD.js";import{a as O}from"./chunk-UIAZK7O4.js";import{a as E}from"./chunk-WXQINL7T.js";import"./chunk-L34VEILA.js";import{a as F}from"./chunk-SEHDV2E7.js";import{a as R}from"./chunk-STAKAPIY.js";import"./chunk-RUDA2RPX.js";import{a as y}from"./chunk-O7TQW4TT.js";import{i as j}from"./chunk-Y2FNOCH7.js";import"./chunk-4BQZLGFG.js";import"./chunk-MHD2J2H6.js";import{d as p,g as S,h as b,k as x,n as M,t as _}from"./chunk-F6QTPZUH.js";import"./chunk-R7NQQTEA.js";import{e as C}from"./chunk-ISKXA73K.js";import"./chunk-DBXTAN6W.js";import"./chunk-ZESSTKUQ.js";import{Cb as o,Db as a,Eb as c,F as f,Lb as P,Wa as s,Xb as g,ab as r,hb as h,mb as u,tb as d,wa as w,yb as v}from"./chunk-KXY2N67X.js";import"./chunk-4CLCTAJ7.js";function D(n,L){n&1&&(o(0,"div",1),c(1,"img",13),a())}var te=(()=>{class n{constructor(i,t,e,l,m,N){this.passwordService=i,this.router=t,this.notificationService=e,this.formValidation=l,this.screenService=m,this.tempStorageService=N,this.isLoading=w(!1),this.isMobile=!1,this.resetPasswordForm=new b({newPassword:this.formValidation.createFormControl("",[p.required,this.formValidation.passwordValidator()]),token:this.formValidation.createFormControl("",[p.required,p.pattern(this.formValidation.patterns.confirmationCode)])})}ngOnInit(){this.screenService.isMobile$.subscribe(i=>{this.isMobile=i})}onResetPassword(){if(this.resetPasswordForm.invalid)return;this.isLoading.set(!0);let i=this.tempStorageService.getEmail(),t={token:Number(this.resetPasswordForm.value.token),email:i,password:this.resetPasswordForm.value.newPassword};this.passwordService.resetPassword(t).pipe(f(()=>this.isLoading.set(!1))).subscribe({next:()=>{this.notificationService.showSuccess("Senha redefinida com sucesso! Fa\xE7a login novamente."),this.router.navigate(["/auth/login"])},error:e=>{let l=e?.error?.code||e?.error?.field||"500",m=E[l]||"Erro desconhecido.";this.notificationService.showError(m)}})}static{this.\u0275fac=function(t){return new(t||n)(r(k),r(C),r(j),r(y),r(R),r(V))}}static{this.\u0275cmp=h({type:n,selectors:[["app-reset-password"]],decls:15,vars:9,consts:[[1,"reset-password-container"],[1,"reset-password-left"],[1,"reset-password-right"],[1,"reset-password-card"],[1,"logo-section"],["src","logo.svg","alt","Stonkz Logo",1,"logo"],[1,"reset-password-title"],[1,"reset-password-subtitle"],[3,"ngSubmit","formGroup"],["label","C\xF3digo","placeholder","Digite o c\xF3digo","type","text","mask","000-000",3,"control"],["label","Nova Senha",3,"control","confirmControl","isConfirmPassword"],[2,"margin-top","16px"],[3,"label","disabled","loading"],["src","register/confirm.svg","alt","Reset Password Image",1,"reset-password-image"]],template:function(t,e){t&1&&(o(0,"div",0),u(1,D,2,0,"div",1),o(2,"div",2)(3,"section",3)(4,"div",4),c(5,"img",5),a(),o(6,"h2",6),g(7,"Redefinir Senha"),a(),o(8,"p",7),g(9," Digite sua nova senha para redefini\xE7\xE3o. "),a(),o(10,"form",8),P("ngSubmit",function(){return e.onResetPassword()}),c(11,"app-input",9)(12,"app-password-input",10),o(13,"div",11),c(14,"app-button",12),a()()()()()),t&2&&(s(),v(e.isMobile?-1:1),s(9),d("formGroup",e.resetPasswordForm),s(),d("control",e.resetPasswordForm.controls.token),s(),d("control",e.resetPasswordForm.controls.newPassword)("confirmControl",e.resetPasswordForm.controls.newPassword)("isConfirmPassword",!0),s(2),d("label","Redefinir Senha")("disabled",e.resetPasswordForm.invalid||e.isLoading())("loading",e.isLoading()))},dependencies:[_,x,S,M,F,I,O],styles:['@charset "UTF-8";.reset-password-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-height:100vh;width:100%;overflow:hidden}.reset-password-left[_ngcontent-%COMP%]{flex:7;display:flex;justify-content:center;position:relative}.reset-password-right[_ngcontent-%COMP%]{flex:3;display:flex;align-items:center;justify-content:center;height:100vh;overflow-y:auto}.logo-section[_ngcontent-%COMP%]{display:flex;justify-content:left;margin-bottom:20px}.logo[_ngcontent-%COMP%]{width:163px;height:42px;object-fit:contain}.reset-password-image[_ngcontent-%COMP%]{width:100%;height:100vh;object-fit:cover;object-position:top}.reset-password-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px;text-align:center}.reset-password-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;row-gap:8px}.reset-password-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:10px;text-align:left}.reset-password-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:20px;text-align:left}.resend-text[_ngcontent-%COMP%]{margin-top:15px;font-size:14px}.resend-link[_ngcontent-%COMP%]{color:var(--color-primary);cursor:pointer;font-weight:500}.resend-link[_ngcontent-%COMP%]:hover{opacity:.7}@media (max-width: 768px){.reset-password-container[_ngcontent-%COMP%]{flex-direction:column}.reset-password-left[_ngcontent-%COMP%]{display:none}.reset-password-right[_ngcontent-%COMP%]{align-items:flex-start;margin-top:24px;width:100%;height:auto}.reset-password-card[_ngcontent-%COMP%]{padding:15px}}']})}}return n})();export{te as ResetPasswordComponent};
