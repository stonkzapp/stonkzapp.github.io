import{a as V}from"./chunk-R64SHCBP.js";import{a as F,b as S,c as N,f as w,h as z}from"./chunk-PSHGO4VA.js";import{a as D}from"./chunk-UIAZK7O4.js";import"./chunk-L34VEILA.js";import{a as E}from"./chunk-SEHDV2E7.js";import"./chunk-RUDA2RPX.js";import{a as k}from"./chunk-O7TQW4TT.js";import"./chunk-4BQZLGFG.js";import"./chunk-MHD2J2H6.js";import{d as o,g as P,k as _,n as x,r as O,t as y}from"./chunk-F6QTPZUH.js";import{a as b,b as C}from"./chunk-R7NQQTEA.js";import{e as h}from"./chunk-ISKXA73K.js";import{c as M}from"./chunk-DBXTAN6W.js";import"./chunk-ZESSTKUQ.js";import{Cb as n,Db as l,Eb as d,Lb as g,Rc as v,Wa as i,Xb as p,ab as s,hb as u,tb as a}from"./chunk-KXY2N67X.js";import"./chunk-4CLCTAJ7.js";var Q=(()=>{class c{constructor(e,r,t,f){this.fb=e,this.userService=r,this.router=t,this.formValidation=f,this.userProfile=null,this.isLoading=!1,this.isSaving=!1,this.profileForm=this.fb.group({firstName:this.formValidation.createFormControl("",[o.required,o.minLength(2)]),lastName:this.formValidation.createFormControl("",[o.required,o.minLength(2)]),email:this.formValidation.createFormControl("",[o.required,o.email]),document:this.formValidation.createFormControl({value:"",disabled:!0},[o.required])}),this.profileSubscription=this.userService.getUserProfile().subscribe({next:m=>{this.userProfile=m,this.populateForm(m)},error:m=>{console.error("Erro ao carregar perfil:",m)}})}ngOnInit(){}ngOnDestroy(){this.profileSubscription&&this.profileSubscription.unsubscribe()}populateForm(e){this.profileForm.patchValue({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",document:e.cpf||e.document||""})}get firstNameControl(){return this.profileForm.get("firstName")}get lastNameControl(){return this.profileForm.get("lastName")}get emailControl(){return this.profileForm.get("email")}get documentControl(){return this.profileForm.get("document")}onSubmit(){if(this.profileForm.valid){this.isSaving=!0;let e=this.profileForm.value,r={firstName:e.firstName,lastName:e.lastName,email:e.email,document:this.documentControl.value,phoneNumber:this.userProfile?.phoneNumber||"",phone:this.userProfile?.phone,cpf:this.userProfile?.cpf,birthDate:this.userProfile?.birthDate,address:this.userProfile?.address};this.userService.updateUserProfile(r).subscribe({next:()=>{console.log("Perfil atualizado com sucesso!"),this.isSaving=!1,setTimeout(()=>{this.router.navigate(["/dashboard/profile"])},1500)},error:t=>{console.error("Erro ao atualizar perfil:",t),this.isSaving=!1}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.profileForm.controls).forEach(e=>{this.profileForm.get(e)?.markAsTouched()})}static{this.\u0275fac=function(r){return new(r||c)(s(O),s(V),s(h),s(k))}}static{this.\u0275cmp=u({type:c,selectors:[["stz-profile-details"]],decls:17,vars:9,consts:[[1,"profile-details-container"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],["label","Nome","placeholder","Digite seu nome","type","text",1,"form-field",3,"control"],["label","Sobrenome","placeholder","Digite seu sobrenome","type","text",1,"form-field",3,"control"],["label","Email","placeholder","Digite seu email","type","email",1,"form-field",3,"control"],["label","CPF","placeholder","000.000.000-00","type","text","mask","000.000.000-00",1,"form-field",3,"control"],[1,"form-actions"],["label","Salvar Altera\xE7\xF5es","iconLeft","save","color","primary","type","submit",3,"width","height","loading","disabled"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"form",1),g("ngSubmit",function(){return t.onSubmit()}),n(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title")(5,"mat-icon"),p(6,"person"),l(),p(7," Informa\xE7\xF5es Pessoais "),l()(),n(8,"mat-card-content")(9,"div",3),d(10,"app-input",4)(11,"app-input",5),l(),n(12,"div",3),d(13,"app-input",6)(14,"app-input",7),l()()(),n(15,"div",8),d(16,"app-button",9),l()()()),r&2&&(i(),a("formGroup",t.profileForm),i(9),a("control",t.firstNameControl),i(),a("control",t.lastNameControl),i(2),a("control",t.emailControl),i(),a("control",t.documentControl),i(2),a("width","180px")("height","44px")("loading",t.isSaving)("disabled",t.profileForm.invalid))},dependencies:[v,y,_,P,x,z,F,N,w,S,M,C,b,E,D],styles:['@charset "UTF-8";.profile-details-container[_ngcontent-%COMP%]{max-width:800px;background-color:var(--color-background);min-height:100vh;transition:background-color var(--transition-normal)}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-4);margin-bottom:var(--space-8);padding-bottom:var(--space-4);border-bottom:1px solid var(--color-border-primary)}.back-button[_ngcontent-%COMP%]{color:var(--color-text-tertiary);transition:color var(--transition-fast);cursor:pointer;padding:var(--space-2);border-radius:var(--radius-md);transition:all var(--transition-fast)}.back-button[_ngcontent-%COMP%]:hover{color:var(--color-primary);background-color:var(--color-surface-hover)}.page-title[_ngcontent-%COMP%]{font-size:var(--font-size-4xl);font-weight:var(--font-weight-bold);color:var(--color-text-primary);margin:0;font-family:var(--font-family);line-height:var(--line-height-tight);transition:color var(--transition-normal)}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-6)}.form-section[_ngcontent-%COMP%]{background-color:var(--color-card-background);border:1px solid var(--color-card-border);border-radius:var(--radius-xl);box-shadow:var(--shadow-card);transition:all var(--transition-normal);overflow:hidden}.form-section[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-card-hover);transform:translateY(-2px)}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:var(--space-6) var(--space-6) 0 var(--space-6);background-color:var(--color-surface-secondary);border-bottom:1px solid var(--color-border-tertiary)}.form-section[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin:0;transition:color var(--transition-normal)}.form-section[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary);font-size:var(--font-size-2xl);width:var(--font-size-2xl);height:var(--font-size-2xl)}.form-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:var(--space-6)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-5);margin-bottom:var(--space-5)}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-field[_ngcontent-%COMP%], .form-field-small[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-4);padding-top:var(--space-6);border-top:1px solid var(--color-border-primary)}@media (max-width: 768px){.profile-details-container[_ngcontent-%COMP%]{padding:var(--space-5) var(--space-4)}.page-title[_ngcontent-%COMP%]{font-size:var(--font-size-2xl)}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--space-4)}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-3)}}@media (max-width: 480px){.profile-details-container[_ngcontent-%COMP%]{padding:var(--space-4) var(--space-3)}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--space-3)}.page-title[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.form-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:var(--space-5) var(--space-4)}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:var(--space-5) var(--space-5) 0 var(--space-5)}}']})}}return c})();export{Q as ProfileDetailsComponent};
