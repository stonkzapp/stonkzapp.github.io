import{b as T}from"./chunk-OPIB7HXL.js";import{h as z}from"./chunk-PSHGO4VA.js";import{a as k}from"./chunk-SEHDV2E7.js";import"./chunk-4BQZLGFG.js";import"./chunk-MHD2J2H6.js";import{a as y,b as w}from"./chunk-R7NQQTEA.js";import{c as v,e as S}from"./chunk-ISKXA73K.js";import{c as E}from"./chunk-DBXTAN6W.js";import"./chunk-ZESSTKUQ.js";import{Cb as t,Db as e,Ib as u,Lb as m,Mb as a,Pc as O,Rc as b,Wa as r,Xb as n,Yb as P,ab as d,fa as p,ga as l,gc as M,hb as _,ic as f,mb as C,tb as g,yb as h}from"./chunk-KXY2N67X.js";import"./chunk-4CLCTAJ7.js";function I(i,x){i&1&&(t(0,"div",2)(1,"mat-icon",5),n(2,"hourglass_empty"),e(),t(3,"h2"),n(4,"Processando seu pagamento..."),e(),t(5,"p"),n(6,"Aguarde enquanto confirmamos sua assinatura."),e()())}function D(i,x){if(i&1){let o=u();t(0,"div",3)(1,"div",6)(2,"mat-icon"),n(3,"check_circle"),e()(),t(4,"h1"),n(5,"Pagamento Aprovado!"),e(),t(6,"p",7),n(7," Sua assinatura foi ativada com sucesso. Agora voc\xEA tem acesso completo a todas as funcionalidades PRO. "),e(),t(8,"div",8)(9,"h3"),n(10,"Detalhes da Assinatura"),e(),t(11,"div",9)(12,"span",10),n(13,"Status:"),e(),t(14,"span",11),n(15,"Ativo"),e()(),t(16,"div",9)(17,"span",10),n(18,"Plano:"),e(),t(19,"span",12),n(20,"PRO"),e()(),t(21,"div",9)(22,"span",10),n(23,"Pr\xF3ximo pagamento:"),e(),t(24,"span",12),n(25),M(26,"date"),e()()(),t(27,"div",13)(28,"app-button",14),m("click",function(){p(o);let s=a();return l(s.goToDashboard())}),e(),t(29,"app-button",15),m("click",function(){p(o);let s=a();return l(s.goToProfile())}),e()(),t(30,"div",16)(31,"p"),n(32," Voc\xEA ser\xE1 redirecionado automaticamente para o dashboard em alguns segundos... "),e()()()}if(i&2){let o=a();r(25),P(f(26,5,o.getNextPaymentDate(),"dd/MM/yyyy")),r(3),g("width","200px")("height","48px"),r(),g("width","200px")("height","48px")}}function V(i,x){if(i&1){let o=u();t(0,"div",4)(1,"div",17)(2,"mat-icon"),n(3,"error"),e()(),t(4,"h1"),n(5,"Erro no Processamento"),e(),t(6,"p",18),n(7," Ocorreu um erro ao processar seu pagamento. Entre em contato com o suporte se o problema persistir. "),e(),t(8,"div",13)(9,"app-button",19),m("click",function(){p(o);let s=a();return l(s.goToProfile())}),e()()()}i&2&&(r(9),g("width","200px")("height","48px"))}var H=(()=>{class i{constructor(o,c,s){this.route=o,this.router=c,this.subscriptionService=s,this.paymentId=null,this.isLoading=!0,this.isSuccess=!1}ngOnInit(){this.route.queryParams.subscribe(o=>{this.paymentId=o.payment_id||o.preference_id,this.paymentId?this.processPayment():(this.isLoading=!1,this.isSuccess=!1)})}processPayment(){this.paymentId&&this.subscriptionService.processApprovedPayment(this.paymentId).subscribe({next:o=>{this.isLoading=!1,this.isSuccess=!0,setTimeout(()=>{this.router.navigate(["/dashboard"])},5e3)},error:o=>{console.error("Erro ao processar pagamento:",o),this.isLoading=!1,this.isSuccess=!1}})}goToDashboard(){this.router.navigate(["/dashboard"])}goToProfile(){this.router.navigate(["/dashboard/profile"])}getNextPaymentDate(){return new Date(Date.now()+30*24*60*60*1e3)}static{this.\u0275fac=function(c){return new(c||i)(d(v),d(S),d(T))}}static{this.\u0275cmp=_({type:i,selectors:[["stz-subscription-success"]],decls:5,vars:1,consts:[[1,"success-container"],[1,"success-content"],[1,"loading-section"],[1,"success-section"],[1,"error-section"],[1,"loading-icon"],[1,"success-icon"],[1,"success-message"],[1,"subscription-details"],[1,"detail-item"],[1,"label"],[1,"value","success"],[1,"value"],[1,"action-buttons"],["label","Ir para Dashboard","iconLeft","dashboard","color","primary",3,"click","width","height"],["label","Ver Perfil","iconLeft","person","color","secondary",3,"click","width","height"],[1,"redirect-message"],[1,"error-icon"],[1,"error-message"],["label","Tentar Novamente","iconLeft","refresh","color","primary",3,"click","width","height"]],template:function(c,s){c&1&&(t(0,"div",0)(1,"div",1),C(2,I,7,0,"div",2)(3,D,33,8,"div",3)(4,V,10,2,"div",4),e()()),c&2&&(r(2),h(s.isLoading?2:s.isSuccess?3:4))},dependencies:[b,O,z,w,y,E,k],styles:['@charset "UTF-8";.success-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;background-color:var(--background-color);transition:background-color .3s ease}.success-content[_ngcontent-%COMP%]{max-width:600px;width:100%;text-align:center}.loading-section[_ngcontent-%COMP%]{padding:48px 24px}.loading-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:var(--primary-color);animation:_ngcontent-%COMP%_spin 2s linear infinite;margin-bottom:24px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:var(--text-color);margin:0 0 16px;transition:color .3s ease}.loading-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary-color);margin:0;transition:color .3s ease}.success-section[_ngcontent-%COMP%]{padding:48px 24px}.success-icon[_ngcontent-%COMP%]{margin-bottom:24px}.success-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#4caf50}.success-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-color);margin:0 0 16px;transition:color .3s ease}.success-message[_ngcontent-%COMP%]{font-size:18px;color:var(--text-secondary-color);margin:0 0 32px;line-height:1.5;transition:color .3s ease}.subscription-details[_ngcontent-%COMP%]{background-color:var(--card-background-color);border:1px solid var(--card-border-color);border-radius:12px;padding:24px;margin:32px 0;text-align:left;transition:all .3s ease}.subscription-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--text-color);margin:0 0 20px;text-align:center;transition:color .3s ease}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--border-color);transition:border-color .3s ease}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary-color);font-weight:500;transition:color .3s ease}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;color:var(--text-color);font-weight:600;transition:color .3s ease}.detail-item[_ngcontent-%COMP%]   .value.success[_ngcontent-%COMP%]{color:#4caf50}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;margin:32px 0;flex-wrap:wrap}.redirect-message[_ngcontent-%COMP%]{margin-top:24px}.redirect-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary-color);margin:0;transition:color .3s ease}.error-section[_ngcontent-%COMP%]{padding:48px 24px}.error-icon[_ngcontent-%COMP%]{margin-bottom:24px}.error-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:var(--danger-color)}.error-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-color);margin:0 0 16px;transition:color .3s ease}.error-message[_ngcontent-%COMP%]{font-size:18px;color:var(--text-secondary-color);margin:0 0 32px;line-height:1.5;transition:color .3s ease}@media (max-width: 768px){.success-container[_ngcontent-%COMP%]{padding:16px}.success-content[_ngcontent-%COMP%]{max-width:100%}.loading-section[_ngcontent-%COMP%], .success-section[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]{padding:32px 16px}.loading-icon[_ngcontent-%COMP%], .success-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.loading-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .success-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{font-size:16px}.subscription-details[_ngcontent-%COMP%]{padding:20px;margin:24px 0}.subscription-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.action-buttons[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{width:100%!important;max-width:300px}}@media (max-width: 480px){.success-container[_ngcontent-%COMP%]{padding:12px}.loading-section[_ngcontent-%COMP%], .success-section[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]{padding:24px 12px}.loading-icon[_ngcontent-%COMP%], .success-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.loading-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .success-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{font-size:15px}.subscription-details[_ngcontent-%COMP%]{padding:16px}.detail-item[_ngcontent-%COMP%]{padding:10px 0}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px}}']})}}return i})();export{H as SubscriptionSuccessComponent};
