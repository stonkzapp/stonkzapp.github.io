<div class="change-password-container">
  <!-- Formulário -->
  <form
    [formGroup]="passwordForm"
    (ngSubmit)="onSubmit()"
    class="password-form">
    <mat-card class="form-section">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>lock</mat-icon>
          Segurança da Conta
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <!-- Senha Atual -->
        <div class="form-row">
          <app-input
            label="Senha Atual"
            placeholder="Digite sua senha atual"
            type="password"
            [control]="currentPasswordControl"
            class="form-field">
          </app-input>
        </div>

        <!-- Nova Senha -->
        <div class="form-row">
          <app-input
            label="Nova Senha"
            placeholder="Digite sua nova senha"
            type="password"
            [control]="newPasswordControl"
            class="form-field">
          </app-input>
        </div>

        <!-- Indicador de Força da Senha -->
        <div class="password-strength" *ngIf="newPasswordControl.value">
          <div class="strength-label">Força da senha:</div>
          <div class="strength-bars">
            <div
              class="strength-bar"
              *ngFor="let bar of [1, 2, 3, 4, 5]"
              [class.active]="
                bar <= getPasswordStrength(newPasswordControl.value).score
              "
              [style.background-color]="
                bar <= getPasswordStrength(newPasswordControl.value).score
                  ? getPasswordStrength(newPasswordControl.value).color
                  : '#e0e0e0'
              "></div>
          </div>
          <div
            class="strength-text"
            [style.color]="getPasswordStrength(newPasswordControl.value).color">
            {{ getPasswordStrength(newPasswordControl.value).label }}
          </div>
        </div>

        <!-- Confirmar Nova Senha -->
        <div class="form-row">
          <app-input
            label="Confirmar Nova Senha"
            placeholder="Confirme sua nova senha"
            type="password"
            [control]="confirmPasswordControl"
            class="form-field">
          </app-input>
        </div>

        <!-- Erro de Senhas Diferentes -->
        <div
          class="form-error"
          *ngIf="
            passwordForm.hasError('passwordMismatch') &&
            confirmPasswordControl.touched
          ">
          {{ getPasswordMismatchError() }}
        </div>

        <!-- Dicas de Segurança -->
        <div class="security-tips">
          <h3>Dicas para uma senha segura:</h3>
          <ul>
            <li>Use pelo menos 8 caracteres</li>
            <li>Combine letras maiúsculas e minúsculas</li>
            <li>Inclua números e símbolos especiais</li>
            <li>Evite informações pessoais óbvias</li>
            <li>Não use a mesma senha em outros sites</li>
          </ul>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Botões de Ação -->
    <div class="form-actions">
      <!-- <app-button
        label="Cancelar"
        iconLeft="cancel"
        color="secondary"
        [width]="'auto'"
        [height]="'44px'">
      </app-button> -->

      <app-button
        label="Alterar Senha"
        iconLeft="lock"
        color="primary"
        [width]="'180px'"
        [height]="'44px'"
        [loading]="isSaving"
        [disabled]="passwordForm.invalid"
        type="submit">
      </app-button>
    </div>
  </form>
</div>
