<div class="login-container">
  @if (!isMobile) {
  <div class="login-left">
    <img src="login/login.svg" alt="Login Image" class="login-image" />
  </div>
  }

  <div class="login-right">
    <section class="login-card">
      <div class="logo-section">
        <img src="logo.svg" alt="Stonkz Logo" class="logo" />
      </div>
      <h2 class="login-title">
        Entre ou
        <a (click)="onRegister()" class="register-link">crie sua conta</a>
      </h2>

      <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
        <app-input
          label="E-mail"
          placeholder="Digite seu E-mail"
          type="text"
          [control]="$any(loginForm.get('email'))">
        </app-input>

        <app-input
          label="Senha"
          placeholder="Digite sua senha"
          type="password"
          [control]="$any(loginForm.get('password'))">
        </app-input>

        <div class="login-options">
          <a (click)="onForgotPassword()" class="forgot-password-link"
            >Esqueceu sua senha?</a
          >
        </div>

        <app-button
          [label]="'Entrar'"
          [disabled]="loginForm.invalid || isLoading()"
          [loading]="isLoading()"
          [iconLeft]="null"
          [iconRight]="null">
        </app-button>
      </form>

      <!-- Seção de Login Alternativo -->
      <div class="alternative-login">
        <!-- Autenticação Biométrica -->
        @if (biometricAvailable() && biometricEnrolled()) {
        <div class="biometric-section">
          <button
            mat-raised-button
            class="biometric-button"
            [disabled]="isBiometricLoading()"
            (click)="onBiometricLogin()"
            [matTooltip]="'Usar ' + getBiometricText()">
            @if (isBiometricLoading()) {
            <mat-icon class="spinning">refresh</mat-icon>
            } @else {
            <mat-icon>{{ getBiometricIcon() }}</mat-icon>
            }
            <span>{{ getBiometricText() }}</span>
          </button>
        </div>
        } @else if (biometricAvailable()) {
        <div class="biometric-setup">
          <button
            mat-stroked-button
            class="setup-biometric-button"
            (click)="onSetupBiometric()"
            [matTooltip]="'Configurar ' + getBiometricText()">
            <mat-icon>{{ getBiometricIcon() }}</mat-icon>
            <span>Configurar {{ getBiometricText() }}</span>
          </button>
        </div>
        }

        <!-- Divisor -->
        <div class="divider">
          <mat-divider></mat-divider>
          <span class="divider-text">ou continue com</span>
          <mat-divider></mat-divider>
        </div>

        <!-- Botões de Login Social -->
        <div class="social-login-grid">
          @for (provider of socialProviders; track provider.provider) {
          <button
            mat-raised-button
            class="social-button"
            [class]="'social-' + provider.provider"
            [disabled]="isSocialProviderLoading(provider.provider)"
            (click)="onSocialLogin(provider.provider)"
            [matTooltip]="'Entrar com ' + provider.name">
            @if (isSocialProviderLoading(provider.provider)) {
            <mat-icon class="spinning">refresh</mat-icon>
            } @else {
            <mat-icon [style.color]="provider.color">{{
              provider.icon
            }}</mat-icon>
            }
            <span>{{ provider.name }}</span>
          </button>
          }
        </div>

        <!-- SSO Mobile -->
        @if (isMobile) {
        <div class="sso-section">
          <button
            mat-stroked-button
            class="sso-button"
            [disabled]="isSocialProviderLoading('sso')"
            (click)="onSSOLogin()"
            matTooltip="Single Sign-On do dispositivo">
            @if (isSocialProviderLoading('sso')) {
            <mat-icon class="spinning">refresh</mat-icon>
            } @else {
            <mat-icon>smartphone</mat-icon>
            }
            <span>SSO do Dispositivo</span>
          </button>
        </div>
        }

        <!-- Keycloak Enterprise -->
        <!-- <div class="enterprise-section">
          <button
            mat-stroked-button
            class="enterprise-button"
            matTooltip="Para empresas com Keycloak">
            <mat-icon>business</mat-icon>
            <span>Login Empresarial</span>
          </button>
        </div> -->
      </div>
    </section>
  </div>
</div>

<!-- Adicionar após o formulário de login, antes do footer
<div class="mock-credentials-info">
  <div class="mock-badge">DEV</div>
  <div class="mock-info">
    <h4>Modo de Desenvolvimento</h4>
    <p>Use estas credenciais para testar:</p>
    <div class="credentials">
      <strong>Email:</strong> appstonkz&#64;gmail.com<br />
      <strong>Senha:</strong> Stonkz&#64;1
    </div>
    <small
      >O sistema tentará primeiro o backend real, depois usará dados
      simulados.</small
    >
  </div>
</div> -->
